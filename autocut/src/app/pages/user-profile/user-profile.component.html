<div class="min-h-screen flex flex-col items-center bg-[#F5F5F5]">

  <div
    class="relative w-full max-w-5xl bg-white mt-10 rounded-2xl shadow-md p-10 border border-[#E0E0E0] flex flex-col items-center"
  >
  
    <button
      (click)="goToSettings()"
      class="absolute top-6 right-6 bg-[#880E0E] text-white text-sm font-medium px-4 py-2 rounded-md hover:bg-[#B71C1C] transition"
    >
      Editar Perfil
    </button>


    <img
      [src]="user?.avatarUrl || 'https://cdn-icons-png.flaticon.com/512/1998/1998592.png'"
      alt="User Avatar"
      class="w-40 h-40 rounded-full object-cover border-4 border-[#880E0E] shadow-md mb-6"
    />

    
    <h2 class="text-3xl font-bold text-[#1C1C1C] mb-1">
      {{ '@' + (user?.name || 'Usuario') }}
    </h2>
    <p class="text-lg text-[#424242] font-medium">
      {{ user?.email || 'correo@autocut.com' }}
    </p>

    <div class="flex items-center gap-2 mt-2">
      <span
        class="inline-block w-2 h-2 rounded-full"
        [ngClass]="user?.visibility === 'private' ? 'bg-red-500' : 'bg-green-500'"
      ></span>
      <span class="text-sm text-[#757575] font-medium">
        {{ user?.visibility === 'private' ? 'Perfil privado' : 'Perfil público' }}
      </span>
    </div>

  
    <p class="text-center text-[#757575] max-w-2xl mt-4">
      {{ user?.bio || 'Aún no has agregado una biografía. Personaliza tu perfil en Configuración.' }}
    </p>
  </div>

  <div class="w-full max-w-6xl mt-14 px-4 flex flex-col items-center">
    <h3 class="text-2xl font-semibold text-[#1C1C1C] mb-6 text-center">
      Badges
    </h3>
    <div class="flex flex-wrap justify-center gap-6">
      <div
        *ngFor="let badge of badges"
        class="flex flex-col items-center bg-white border border-[#E0E0E0] rounded-xl shadow-sm hover:shadow-md transition p-4 w-44"
      >
        <p class="text-[#1C1C1C] font-semibold text-sm text-center">
          {{ badge.name }}
        </p>
        <p class="text-[#757575] text-xs text-center mt-1">
          Insignia obtenida por logros automotrices destacados.
        </p>
      </div>
    </div>
  </div>


  <div class="w-full max-w-6xl mt-14 mb-10 px-4">
    <div class="flex items-center justify-center gap-2 mb-6">
      <h3 class="text-2xl font-semibold text-[#1C1C1C]">Your Collection</h3>
      <button
        (click)="openModal()"
        class="text-[#007BFF] text-3xl font-bold leading-none hover:text-[#0056b3] transition"
        title="Agregar nueva colección"
      >
        +
      </button>
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
      <div
        class="border border-[#E0E0E0] rounded-xl bg-white shadow-sm hover:shadow-md transition p-4 flex flex-col items-center"
        *ngFor="let car of cars"
      >
        <div
          class="w-48 h-36 bg-[#F5F5F5] rounded-md mb-4 flex items-center justify-center"
        >
          <img
            *ngIf="car.image"
            [src]="car.image"
            alt="Car"
            class="w-full h-full object-cover rounded-md"
          />
          <span *ngIf="!car.image" class="text-gray-400 text-sm">
            Imagen del modelo
          </span>
        </div>
        <p class="font-semibold text-[#1C1C1C]">{{ car.model }}</p>
        <p class="text-[#757575] text-sm">{{ car.brand }}</p>
        <p class="text-[#757575] text-sm">{{ car.year }}</p>
      </div>
    </div>
  </div>

  <div
    *ngIf="showModal"
    class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
  >
    <div
      class="bg-[#F3F3F3] rounded-2xl shadow-lg w-[400px] p-8 relative flex flex-col items-center"
    >
      <button
        (click)="closeModal()"
        class="absolute top-4 right-4 text-gray-500 hover:text-[#880E0E] text-lg font-bold"
      >
        ✕
      </button>

    
      <div
        class="w-full h-40 bg-white border border-[#E0E0E0] rounded-xl flex items-center justify-center mb-6 cursor-pointer hover:border-[#007BFF] transition"
        (click)="fileInput.click()"
      >
        <ng-container *ngIf="!selectedImage">
          <span class="text-gray-400 text-sm">Seleccionar imagen</span>
        </ng-container>
        <ng-container *ngIf="selectedImage">
          <img
            [src]="selectedImage"
            alt="Preview"
            class="max-h-36 rounded-lg object-cover"
          />
        </ng-container>
        <input
          #fileInput
          type="file"
          accept="image/*"
          class="hidden"
          (change)="onFileSelected($event)"
        />
      </div>

    
      <div class="w-full flex flex-col gap-4 mb-6">
        <input
          type="text"
          placeholder="Modelo"
          [(ngModel)]="newCar.model"
          class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#007BFF]"
        />
        <input
          type="text"
          placeholder="Marca"
          [(ngModel)]="newCar.brand"
          class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#007BFF]"
        />
        <input
          type="number"
          placeholder="Año"
          [(ngModel)]="newCar.year"
          class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#007BFF]"
        />
      </div>

      <button
        (click)="addCar()"
        class="bg-[#007BFF] hover:bg-[#0056b3] text-white font-medium px-8 py-2 rounded-md flex items-center gap-2 transition"
      >
        Add
        <span class="text-lg">→</span>
      </button>
    </div>
  </div>
</div>

